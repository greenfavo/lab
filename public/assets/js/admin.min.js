$(document).ready(function(){function e(e,a){var t=$(e),n=$(a);t.click(function(e){for(var a=0;a<n.length;a++)n[a].checked===!0?n[a].checked=!1:n[a].checked=!0})}function a(){var e=$(".categoryName").val(),a=$(".alias").val(),t=$(".parent").val();$.ajax({url:"/admin/article/category/add",type:"POST",data:{name:e,alias:a,parent:t},success:function(e){if("success"===e.signal){alert("插入成功"),$(".categoryName").val(""),$(".alias").val(""),$(".parent").append("<option value='"+e.id+"' class='"+e.id+"'>"+e.name+"</option>");var a="<tr class='"+e.id+"'><td>";a+='<input type="checkbox" name=\'category\' class="cate_box" value=\''+e.id+"'/>",a+="</td>",a+="<td>"+e.name+"</td>",a+="<td>"+e.alias+"</td>",a+="<td><a href='?delete="+e.id+"'>删除</a>  ",a+="<a href='/admin/article/category/edit?id="+e.id+"'>编辑</a></td>",a+="</tr>",$(".ctb").append(a)}else"exist"===e.signal&&alert("该分类名称或别名已存在")},error:function(){console.log("请求出错")}})}function t(){event.preventDefault();var e=c("delete");null!=e&&$.post("/admin/article/category/delete",{id:e},function(a){"success"===a.signal?($("."+e).remove(),alert("删除成功")):"no"===a.signal?alert("该分类不存在"):"error"===a.signal&&alert("请求出错")})}function n(){var e=$(this).attr("href");return null!=e&&$.post("/admin/article/delete",{id:e},function(a){"success"===a.signal?($("."+e).remove(),alert("删除成功")):"no"===a.signal?alert("该文章不存在"):"error"===a.signal&&alert("请求出错")}),!1}function l(e,a){return e.length>a&&(e=e.substr(0,a)+"..."),e}function c(e){var a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),t=window.location.search.substr(1).match(a);return null!=t?unescape(t[2]):null}$(".addTag").click(function(e){var a=$("#tag").val();a&&$(".tags").append("<p><input type='text' name='tag' value='"+a+"'/><span class='glyphicon glyphicon-remove removeTag'></span></p>"),$("#tag").val("")}),$(".tags").on("click",".removeTag",function(){$(this).parent("p").remove()}),$(".articleBtn").click(function(e){$(".articleMenu").slideToggle()}),$(".all_title").each(function(e,a){var t=l($(this).text(),15);$(this).text(t)}),e($(".checkAll"),$(".cate_box")),e($(".checkAll"),$(".article_box")),e($(".checkAll"),$(".user_box")),$(".addCategory").click(a),$(".deleteBtn").click(t(event)),$(".delete_article_btn").click(n)});